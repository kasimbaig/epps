<div class="modern-table-container">
  <!-- Modern Header Section -->
  <div class="table-header-section">
    <div class="header-content">
      <div class="header-left">
        <!-- Add New Button -->
        <button 
          *ngIf="isAdd"
          (click)="addEvent.emit()"
          class="modern-add-btn">
          <i class="pi pi-plus"></i>
          <span>Add New</span>
        </button>
      </div>
      <div class="header-right">
        <div class="search-container">
          <div class="search-input-wrapper">
            <i class="pi pi-search search-icon"></i>
            <input 
              type="text" 
              class="modern-search-input"
              [(ngModel)]="searchValue" 
              (input)="dataTable.filterGlobal(onSearchInput(searchValue), 'contains')"
              placeholder="Search records..." />
            <button 
              *ngIf="searchValue" 
              (click)="searchValue = ''; dataTable.filterGlobal('', 'contains')"
              class="clear-search-btn">
              <i class="pi pi-times"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modern Table -->
    <p-table #dataTable 
        [columns]="gridColumns" 
        [paginator]="isPaginator" 
        [rows]="rowsPerPage"
        [rowsPerPageOptions]="rowsPerPageOptions"
        [showFirstLastIcon]="showFirstLastIcon"
        [showPageLinks]="showPageLinks"
        [showCurrentPageReport]="showCurrentPageReport"
        [showJumpToPageDropdown]="showJumpToPageDropdown"
        [value]="filteredData" 
        [scrollable]="true" 
        showGridlines="horizontal"
        styleClass="modern-datatable"
        resizableColumns="true" 
        columnResizeMode="expand" 
        [lazy]="lazy"
        [totalRecords]="totalRecords"
        [(selection)]="selectedItems"
        (selectionChange)="selectionEvent.emit(selectedItems)"
        (onPage)="onPageChange($event)"
        (onRowsPerPageChange)="onRowsPerPageChange($event)"
        dataKey="id">
       

          
        <ng-template pTemplate="header" let-columns>
            <tr class="modern-header-row">
                <th *ngIf="isAction" class="modern-header-cell actions-header">
                    <div class="header-content">
                        <i class="pi pi-cog"></i>
                        <span>Actions</span>
                    </div>
                </th>
                <th *ngIf="isCheckBox" class="modern-header-cell selection-header">
                    <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                </th>
                <th class="modern-header-cell" *ngFor="let col of columns" pResizableColumn>
                    <div class="header-content">
                        <div class="header-text">
                            <p-sortIcon [field]="col.field" [pSortableColumn]="col.field"></p-sortIcon>
                            <span>{{ col.header }}</span>
                        </div>
                        <!-- <p-columnFilter [type]="col.filterType || 'text'" [field]="col.field" display="menu" /> -->
                    </div>
                </th>
            </tr>
        </ng-template>
        
        <!-- Dynamic Column Data -->
        <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex">
            <tr class="modern-data-row">
                <td *ngIf="isAction" class="modern-data-cell actions-cell">
                    <div class="actions-container">
                        <button mat-button [matMenuTriggerFor]="actionsMenu" class="modern-action-btn">
                            <i class="pi pi-ellipsis-v"></i>
                            <span>Actions</span>
                    </button>
                    <mat-menu #actionsMenu="matMenu" class="shadow-lg border border-gray-200 bg-gray-100 rounded-md">
                        <button (click)="viewEvent.emit(rowData)" *ngIf="isView" mat-menu-item 
                            class="flex items-center justify-start gap-3 px-4 py-3 w-full hover:bg-blue-50 text-blue-600 hover:text-blue-800 transition-colors duration-200">
                            <i class="fa-solid fa-eye text-blue-500 w-4 h-4 flex-shrink-0"></i>
                            <span class="text-sm font-medium mr-2 ml-2  "> View</span>
                        </button>
                
                        <button (click)="editEvent.emit(rowData)" *ngIf="rowData?.user_permissions?.can_edit" mat-menu-item 
                            class="flex items-center justify-start gap-3 px-4 py-3 w-full hover:bg-green-50 text-green-600 hover:text-green-800 transition-colors duration-200">
                            <i class="fa-solid fa-pen text-green-500 w-4 h-4 flex-shrink-0"></i>
                            <span class="text-sm font-medium mr-2 ml-2">{{editButtonname}}</span>
                        </button>
                        <button (click)="editEvent.emit(rowData)" *ngIf="isEditable" mat-menu-item 
                            class="flex items-center justify-start gap-3 px-4 py-3 w-full hover:bg-green-50 text-green-600 hover:text-green-800 transition-colors duration-200">
                            <i class="fa-solid fa-pen text-green-500 w-4 h-4 flex-shrink-0"></i>
                            <span class="text-sm font-medium mr-2 ml-2">{{editButtonname}}</span>
                        </button>
                
                        <button (click)="deleteEvent.emit(rowData)" *ngIf="isDeletable" mat-menu-item 
                            class="flex items-center justify-start gap-3 px-4 py-3 w-full hover:bg-red-50 text-red-600 hover:text-red-800 transition-colors duration-200">
                            <i class="fa-solid fa-trash text-red-500 w-4 h-4 flex-shrink-0"></i>
                            <span class="text-sm font-medium mr-2 ml-2">Delete</span>
                        </button>
                        <button (click)="approveEvent.emit(rowData)" *ngIf="Approve" mat-menu-item 
                            class="flex items-center justify-start gap-3 px-4 py-3 w-full hover:bg-red-50 text-red-600 hover:text-red-800 transition-colors duration-200">
                            <i class="fa-solid fa-check text-green-500 w-4 h-4 flex-shrink-0"></i>
                            <span class="text-sm font-medium mr-2 ml-2">{{Approve}}</span>
                        </button>
                        <button (click)="rejectEvent.emit(rowData)" *ngIf="Reject" mat-menu-item 
                            class="flex items-center justify-start gap-3 px-4 py-3 w-full hover:bg-red-50 text-red-600 hover:text-red-800 transition-colors duration-200">
                            <i class="fa-solid fa-xmark text-red-500 w-4 h-4 flex-shrink-0"></i>
                            <span class="text-sm font-medium mr-2 ml-2">{{Reject}}</span>
                        </button>

                    </mat-menu>
                    </div>
                </td>
                <td class="modern-data-cell selection-cell" *ngIf="isCheckBox">
                    <p-tableCheckbox [disabled]="isDisabled(rowData)" [value]="rowData"></p-tableCheckbox>
                </td>
                <td *ngFor="let col of gridColumns" class="modern-data-cell">
                    <div class="cell-content">

                    <ng-container *ngIf="!['status','date','number'].includes(col.type)">
                            <span *ngIf="isHtml(resolveNestedField(rowData, col.field))" [innerHTML]="resolveNestedField(rowData, col.field)" class="cell-text"></span>
                            <span *ngIf="!isHtml(resolveNestedField(rowData, col.field))" class="cell-text">
                                {{ resolveNestedField(rowData, col.field) }}
                        </span >
                    </ng-container>
                    <ng-container *ngIf="col.type === 'number'">
                            <span class="cell-text">{{ resolveNestedField(rowData, col.field) || 0 }}</span>
                    </ng-container>
                    <ng-container *ngIf="col.type === 'date'">
                            <span class="cell-text">
                            {{resolveNestedField(rowData, col.field) | date:'dd MMM yy'}}
                        </span>
                    </ng-container>

                    <ng-container *ngIf="col.type == 'status'">
                            <span class="status-badge {{ resolveNestedField(rowData, col.field) == 1 ? 'status-active' : 'status-inactive' }}">
                                <i class="pi {{ resolveNestedField(rowData, col.field) == 1 ? 'pi-check-circle' : 'pi-times-circle' }}"></i>
                                {{ resolveNestedField(rowData, col.field) == 1 ? 'Active' : 'Inactive' }}
                            </span>
                        </ng-container>
                        </div>
                </td>

                
            </tr>
           
        </ng-template>
        
        
        <ng-template pTemplate="emptymessage">
            <tr class="empty-state-row">
                <td [attr.colspan]="gridColumns.length + (isAction ? 1 : 0) + (isCheckBox ? 1 : 0)" class="empty-state-cell">
                    <div class="modern-empty-state">
                        <div class="empty-state-icon">
                            <div class="icon-background">
                                <i class="pi pi-inbox"></i>
                            </div>
                            <div class="floating-dots">
                                <div class="dot dot-1"></div>
                                <div class="dot dot-2"></div>
                                <div class="dot dot-3"></div>
                            </div>
                        </div>

                        <div class="empty-state-content">
                            <h3 class="empty-state-title">No Records Found</h3>
                            <p class="empty-state-message">
                                Your table is empty! Start by adding some data to see your records here.
                            </p>
                        </div>

                        <div class="empty-state-hint">
                            <i class="pi pi-arrow-up"></i>
                            <span>Click "Add" to get started</span>
                            <i class="pi pi-arrow-up"></i>
                        </div>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>


<p-dialog 
    header="Upload Data" 
    [(visible)]="displayUploadDialog" 
    [modal]="true" 
    [responsive]="true" 
    [style]="{width: '55vw', minHeight: '400px'}" 
    [baseZIndex]="10000" 
    [draggable]="false" 
    [maximizable]="true" 
    [resizable]="true"
    styleClass="upload-dialog">
    
    <div class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-100 p-8 rounded-xl shadow-lg border border-blue-200 min-h-[350px] flex items-center justify-center">
        <div class="text-center space-y-8 max-w-md mx-auto">
            <!-- Animated Icon Container -->
            <div class="relative">
                <!-- Rotating Ring -->
                <div class="w-32 h-32 mx-auto relative">
                    <div class="absolute inset-0 border-4 border-blue-200 rounded-full"></div>
                    <div class="absolute inset-0 border-4 border-blue-600 rounded-full border-t-transparent animate-spin"></div>
                    <div class="absolute inset-4 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-lg">
                        <i class="pi pi-cloud-upload text-white text-4xl animate-bounce"></i>
                    </div>
                </div>
                
                <!-- Floating Particles -->
                <div class="absolute top-0 left-1/4 w-2 h-2 bg-blue-400 rounded-full animate-ping"></div>
                <div class="absolute top-1/4 right-0 w-1 h-1 bg-purple-400 rounded-full animate-ping" style="animation-delay: 0.5s;"></div>
                <div class="absolute bottom-1/4 left-0 w-1.5 h-1.5 bg-indigo-400 rounded-full animate-ping" style="animation-delay: 1s;"></div>
            </div>

            <!-- Animated Text -->
            <div class="space-y-4">
                <h2 class="text-4xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent animate-pulse">
                    Coming Soon
                </h2>
                <p class="text-lg text-gray-600 animate-fadeIn">
                    We're working hard to bring you an amazing file upload experience!
                </p>
                
                <!-- Progress Bar Animation -->
                <div class="w-full bg-gray-200 rounded-full h-2 overflow-hidden">
                    <div class="h-full bg-gradient-to-r from-blue-500 to-purple-500 rounded-full animate-pulse relative">
                        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 animate-shimmer"></div>
                    </div>
                </div>
                
                <!-- Feature Preview -->
                <div class="grid grid-cols-2 gap-4 mt-6">
                    <div class="p-3 bg-white/70 backdrop-blur-sm rounded-lg border border-blue-200 transform hover:scale-105 transition-transform duration-300">
                        <i class="pi pi-file-excel text-green-600 text-xl mb-2"></i>
                        <p class="text-xs font-medium text-gray-700">Excel Support</p>
                    </div>
                    <div class="p-3 bg-white/70 backdrop-blur-sm rounded-lg border border-blue-200 transform hover:scale-105 transition-transform duration-300">
                        <i class="pi pi-upload text-blue-600 text-xl mb-2"></i>
                        <p class="text-xs font-medium text-gray-700">Drag & Drop</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    

</p-dialog>

<!-- Report Dialog - Coming Soon -->
<p-dialog 
    header="Generate Report" 
    [(visible)]="displayReportDialog" 
    [modal]="true" 
    [responsive]="true" 
    [style]="{width: '50vw', minHeight: '500px'}" 
    [baseZIndex]="10000" 
    [draggable]="false" 
    [maximizable]="true" 
    [resizable]="true"
    styleClass="report-dialog">
    
    <div class="bg-gradient-to-br from-green-50 via-emerald-50 to-teal-100 p-8 rounded-xl shadow-lg border border-green-200 min-h-[400px] flex items-center justify-center">
        <div class="text-center space-y-8 max-w-md mx-auto">
            <!-- Animated Chart Icon -->
            <div class="relative">
                <!-- Pulsing Background -->
                <div class="w-32 h-32 mx-auto relative">
                    <div class="absolute inset-0 bg-green-200 rounded-full animate-ping opacity-75"></div>
                    <div class="absolute inset-2 bg-green-300 rounded-full animate-ping opacity-50" style="animation-delay: 0.5s;"></div>
                    <div class="absolute inset-4 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-lg">
                        <i class="pi pi-chart-bar text-white text-4xl animate-pulse"></i>
                    </div>
                </div>
                
                <!-- Animated Chart Bars -->
                <div class="absolute -bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-1">
                    <div class="w-2 bg-green-400 rounded-t animate-bounce" style="height: 16px; animation-delay: 0s;"></div>
                    <div class="w-2 bg-emerald-400 rounded-t animate-bounce" style="height: 24px; animation-delay: 0.2s;"></div>
                    <div class="w-2 bg-teal-400 rounded-t animate-bounce" style="height: 20px; animation-delay: 0.4s;"></div>
                    <div class="w-2 bg-green-500 rounded-t animate-bounce" style="height: 28px; animation-delay: 0.6s;"></div>
                </div>
                
                <!-- Floating Elements -->
                <div class="absolute top-0 right-4 w-3 h-3 bg-emerald-400 rounded-full animate-bounce" style="animation-delay: 0.3s;"></div>
                <div class="absolute top-8 left-4 w-2 h-2 bg-teal-400 rounded-full animate-bounce" style="animation-delay: 0.7s;"></div>
            </div>

            <!-- Animated Text -->
            <div class="space-y-4">
                <h2 class="text-4xl font-bold bg-gradient-to-r from-green-600 via-emerald-600 to-teal-600 bg-clip-text text-transparent">
                    <span class="inline-block animate-bounce" style="animation-delay: 0s;">C</span>
                    <span class="inline-block animate-bounce" style="animation-delay: 0.1s;">o</span>
                    <span class="inline-block animate-bounce" style="animation-delay: 0.2s;">m</span>
                    <span class="inline-block animate-bounce" style="animation-delay: 0.3s;">i</span>
                    <span class="inline-block animate-bounce" style="animation-delay: 0.4s;">n</span>
                    <span class="inline-block animate-bounce" style="animation-delay: 0.5s;">g</span>
                    <span class="inline-block animate-bounce mx-2" style="animation-delay: 0.6s;"> </span>
                    <span class="inline-block animate-bounce" style="animation-delay: 0.7s;">S</span>
                    <span class="inline-block animate-bounce" style="animation-delay: 0.8s;">o</span>
                    <span class="inline-block animate-bounce" style="animation-delay: 0.9s;">o</span>
                    <span class="inline-block animate-bounce" style="animation-delay: 1s;">n</span>
                </h2>
                <p class="text-lg text-gray-600 animate-pulse">
                    Advanced reporting features are on the way!
                </p>
                
                <!-- Loading Dots -->
                <div class="flex justify-center space-x-2 py-4">
                    <div class="w-3 h-3 bg-green-500 rounded-full animate-bounce"></div>
                    <div class="w-3 h-3 bg-emerald-500 rounded-full animate-bounce" style="animation-delay: 0.2s;"></div>
                    <div class="w-3 h-3 bg-teal-500 rounded-full animate-bounce" style="animation-delay: 0.4s;"></div>
                </div>
                
                <!-- Feature Preview Cards -->
                <div class="grid grid-cols-3 gap-3 mt-6">
                    <div class="p-3 bg-white/70 backdrop-blur-sm rounded-lg border border-green-200 transform hover:scale-110 transition-all duration-300 hover:shadow-lg">
                        <i class="pi pi-chart-pie text-green-600 text-lg mb-1"></i>
                        <p class="text-xs font-medium text-gray-700">Charts</p>
                    </div>
                    <div class="p-3 bg-white/70 backdrop-blur-sm rounded-lg border border-green-200 transform hover:scale-110 transition-all duration-300 hover:shadow-lg">
                        <i class="pi pi-file-pdf text-red-600 text-lg mb-1"></i>
                        <p class="text-xs font-medium text-gray-700">PDF Export</p>
                    </div>
                    <div class="p-3 bg-white/70 backdrop-blur-sm rounded-lg border border-green-200 transform hover:scale-110 transition-all duration-300 hover:shadow-lg">
                        <i class="pi pi-calendar text-blue-600 text-lg mb-1"></i>
                        <p class="text-xs font-medium text-gray-700">Date Range</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
  
</p-dialog>


<div *ngIf="showConfirmDialog" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 ">
    <div class="bg-white rounded-lg shadow-2xl max-w-md w-full mx-4 transform transition-all duration-300 scale-100">
        <div class="flex items-center gap-4 p-6 bg-rose-700 border-b border-red-800 rounded-t-lg">
            <div class="relative">
                <i class="fa-solid fa-triangle-exclamation text-yellow-100 fa-2xl animate-pulse"></i>
                <div class="absolute -top-1 -right-1 w-3 h-3 bg-yellow-400 rounded-full animate-ping"></div>
            </div>
            <div>
                <span class="font-bold text-white text-lg">Confirm Action</span>
                <div class="text-sm text-yellow-100 mt-1">Please review before proceeding</div>
            </div>
        </div>
        <div class="flex-1 p-6 bg-amber-100">
            <p class="text-gray-700 mb-4 text-center">
                Are you sure you want to delete <span class="font-medium text-red-600">"{{ confirmMessage.name }}"</span>?
                This action cannot be undone.
            </p>

           
        </div>
        
        <div class="flex justify-end gap-4 p-6 bg-amber-100 border-t border-gray-200 rounded-b-lg">
            <span 
                type="button" 
                (click)="showConfirmDialog = false"
                class="group relative px-6 py-3 bg-white text-gray-700 border-2 border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 hover:shadow-md transform hover:-translate-y-0.5 transition-all duration-200 font-medium">
                <i class="pi pi-times mr-2"></i>
                Cancel
                <div class="absolute inset-0 bg-gray-100 rounded-lg opacity-0 group-hover:opacity-20 transition-opacity duration-200"></div>
            </span>
            <span 
                type="button" 
                (click)="deleteEvent.emit(confirmMessage)"
                class="group relative px-6 py-3 bg-gradient-to-r from-red-600 to-orange-600 text-white border-2 border-red-600 rounded-lg hover:from-red-700 hover:to-orange-700 hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 font-medium cursor-pointer">
                <i class="pi pi-check mr-2"></i>
                Confirm
                <div class="absolute inset-0 bg-white rounded-lg opacity-0 group-hover:opacity-10 transition-opacity duration-200"></div>
                <div class="absolute -top-1 -right-1 w-2 h-2 bg-orange-400 rounded-full animate-pulse"></div>
            </span>
        </div>
    </div>
</div>
